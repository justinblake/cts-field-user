//libraries//
import {NgModule, ErrorHandler} from '@angular/core';

//import { JsonPipe } from '@angular/common';
import {IonicApp, IonicModule, IonicErrorHandler} from 'ionic-angular';
import {Storage} from '@ionic/storage';
import {CallNumber} from '@ionic-native/call-number';
import {Network} from '@ionic-native/network';
import {AndroidFullScreen} from '@ionic-native/android-full-screen';
import {Diagnostic} from '@ionic-native/diagnostic';
import {FileOpener} from '@ionic-native/file-opener';
import {File} from '@ionic-native/file';


import {MyApp} from './app.component';
//pages//
import {HistoryPage} from '../pages/history/history';
import {AlertsPage} from '../pages/alerts/alerts';
import {HomeKeysPipe, HomePage} from '../pages/home/home';
import {DrivingDirectionsPage} from '../pages/driving-directions/driving-directions';
import {TabsPage} from '../pages/tabs/tabs';
import {LoginPage} from '../pages/login/login';
import {SplashPage} from '../pages/splash/splash';
import {RejectNotesPage} from '../pages/reject-notes/reject-notes';
import {FeedbackPage} from '../pages/feedback/feedback';
import {KeysPipe, NextDayPage} from '../pages/next-day-tasks/next-day';
import {CompleteNotesPage} from '../pages/complete-notes/complete-notes';
// import {HistoryReviewPage} from '../pages/history-review/history-review';
import {HistoryFeedbackPage} from '../pages/history-feedback/history-feedback';
import {ForemanPage} from '../pages/foreman/foreman'

//providers//
import {ApiService} from '../providers/api-service';
import {TaskManager} from '../providers/task-manager';
import {StorageService} from '../providers/storage-service';
import {GoogleMapsManager} from '../providers/google-maps-manager';
import {GoogleMapsService} from '../providers/google-maps-service';
import {UserManager} from '../providers/user-manager';
import {Geolocation} from '@ionic-native/geolocation';
import {Camera} from '@ionic-native/camera';


import {Utils} from '../utils/utils';
import {LaunchNavigator} from '@ionic-native/launch-navigator';


import {CloudSettings, CloudModule} from '@ionic/cloud-angular';

const cloudSettings: CloudSettings = {
    'core': {
        'app_id': 'a1e0e4dc'
    },
    'push': {
        'sender_id': '675697041935',
        'pluginConfig': {
            'ios': {
                'alert': true,
                'badge': true,
                'sound': true
            },
            'android': {
                'iconColor': '#343434'
            }
        }
    }
};


export function provideStorage() {
    return new Storage(['sqlite', 'indexeddb', 'websql'], {name: '_ctsdb'});
}

@NgModule({
    declarations: [
        MyApp,
        AlertsPage,
        HistoryPage,
        HomePage,
        TabsPage,
        DrivingDirectionsPage,
        LoginPage,
        SplashPage,
        RejectNotesPage,
        FeedbackPage,
        NextDayPage,
        CompleteNotesPage,
        HistoryFeedbackPage,
        HomeKeysPipe,
        KeysPipe,
        ForemanPage
    ],
    imports: [
        CloudModule.forRoot(cloudSettings),
        IonicModule.forRoot(MyApp, {
            scrollAssist: false,
            autoFocusAssist: false,
            tabsPlacement: 'bottom',
            platforms: {
                android: {
                    //tabsPlacement : 'top'
                }
            }
        }, {}), //end IonicModule.forRoot()
    ],
    bootstrap: [IonicApp],
    entryComponents: [
        MyApp,
        HistoryPage,
        AlertsPage,
        HomePage,
        TabsPage,
        DrivingDirectionsPage,
        LoginPage,
        SplashPage,
        RejectNotesPage,
        FeedbackPage,
        NextDayPage,
        CompleteNotesPage,
        HistoryFeedbackPage,
        ForemanPage
    ],
    /** NB: providers are singletons */
    providers: [
        {provide: ErrorHandler, useClass: IonicErrorHandler},
        {provide: Storage, useFactory: provideStorage},
        ApiService,
        TaskManager,
        StorageService,
        Diagnostic,
        GoogleMapsManager,
        GoogleMapsService,
        UserManager,
        Geolocation,
        Utils,
        LaunchNavigator,
        CallNumber,
        Camera,
        Network,
        AndroidFullScreen,
        FileOpener,
        File
    ]
})
export class AppModule {
}
